# 计算器|../common/deepin-calculator.svg|

## 概述

计算器是一款简单易用的桌面计算器，支持加减乘除运算。完美支持键盘输入，在键盘输入时还支持符号容错及计算结果联动。

![0|main](jpg/main.png)

## 操作介绍

### 界面符号介绍

| 图标                       | 名称     | 说明                                                         |
| -------------------------- | :------- | ------------------------------------------------------------ |
| 0~9                        | 数字键   | 基本阿拉伯数字。                                             |
| c                          | 清除     | 点击一次清除当前的表达式内容，连续按两次清空所有表达式历史。 |
| %                          | 百分号   | 用来输入百分号。                                             |
| ![delete](icon/delete.svg) | 删除     | 点击一次向前删除1个字符。                                    |
| +-×÷                       | 加减乘除 | 基本数学运算符，用来进行加法、减法、乘法、除法运算。         |
| .                          | 小数点   | 用来输入小数点。                                             |
| ()                         | 括号     | 用来输入括号，点击一次，同时显示左右括号。如果从键盘输入，输入左括号则出现左括号，输入右括号则出现右括号，若只出现一侧括号，则表达式计算错误。 |
| =                          | 等于     | 用来得出计算结果。                                           |



> ![tips](icon/tips.svg):您可以使用鼠标选择当前输入行，进行修改或复制操作。



### 数学符号容错

计算器支持键盘操作，除了常规的数字和运算符支持之外，还支持数学符号容错功能，让您在键盘输入表达式时，键盘的中英文状态和大小写状态，都不会影响输入表达式。

另外还支持一些特殊的符号容错：

- 乘法符号容错处理：用户输入 * (星号）、x (字母x)都会触发乘法符号激活；
- 除法符号容错处理：输入 / 字符触发除法符号激活；
- 加法符号容错处理：输入 +（加号）会触发加法符号激活； 
- 减法符号容错处理：输入 - (减号）、_ (下划线）都会触发减法符号激活；
- 百分号符号容错处理：输入 % 字符触发余数百分号号激活；
- 小数点符号容错处理：输入 . （英文小数点）、。（中文句号）都会触发小数点符号激活； 
- 括号符号容错处理：输入 左圆括号、右圆括号都会触发括号符号激活；
- 等于号 符号容错处理：输入 = (等于号)、按Enter键都会触发等于号符号激活；
- 清除符号容错处理：输入 Esc 符号触发清除符号激活；
- 删除符号容错处理：输入 Backspace 符号触发删除符号激活；

### 表达式

- 历史表达式
  + 在当前输入表达式区域点击 =（等号）、或按下键盘上的 **Enter** 键执行计算，当前输入框中显示计算结果数字，表达式进入历史表达式区域。 不限制历史表达式行数。
  + 重新编辑：点击单条历史表达式，可重新编辑表达式，表达式显示在输入表达式区域 ，编辑后修改历史表达式及联动表达式的数字结果。
  + 表达式错误：如输入的表达式错误，无法计算，则显示表达式错误。

- 输入表达式
  + 大号字符显示当前正在输入区域的表达式。
  + 按下快捷键 Ctrl + C 直接复制当前表达式的计算结果到系统剪贴板，如表达式错误，则复制当前表达式到系统剪贴版。
  + 百分比转化规则：
    - 把%当做一种运算符号，直接转化为数字。例如：当输入1%时，界面显示为 0.01，再输入1，就变成 0.011，再输入%，就是0.00011。
    - 影响数字联动效果：前一个表达式的结果会自动显示在输入行，这时输入%就直接转化为数字，取消与上一个表达式的联动。例如：前一表达式结果为10，这时输入行就是10，当输入%，就变成 0.1了。

  - 没有实际运算符号的表达式不用记入历史记录。

- 科学计数法
  当结算结果大于16位时用科学计数法显示，即计算结果取前16位乘以10的正负n次方。
  - 当计算结果为正数且大于16位时，显示数字+小数点后15位+e+数字。
  - 当计算结果为小数且大于16位时，显示数字+小数点后15位+e-数字。

![0|scientific-notation](jpg/scientific-notation.png)



### 数字联动

- 当一个计算表达式显示数字结果后，可以继续输入操作符号，此时，新表达式的第一个数就是上一个表达式的计算结果。例如，当前表达式是 10 + 20 = 30， 显示计算结果 30 后，键入 + 号，再输入数字9，会新建一个新的表达式为 30 + 9，按Enter键，得出新表达式的计算结果为39。
- 两个表达式产生联动后，修改上一个表达式的数字和操作符，如果其计算结果改变，则会影响与其联动的新表达式的结果。例如，两个表达式 10 + 20 = 30 和 30 +9 = 39 产生联动，如果将第一个表达式的操作符 + 号修改为 * 号，算式为 10 * 20 = 200 ， 则第二个表达式自动转变为 200 + 9 = 209；根据此规则，最多可支持9条表达式联动。
- 重新编辑含有联动数字的表达式时，修改联动数字或联动数字的表达式错误时，可以解除联动，同时取消高亮显示数字。

### 交互说明

- 计算器按钮对应的键盘符入时在界面上有闪烁效果，帮助用户感知字符的输入。
-  正常输入的数字与产生联动的数字用不同颜色来区分，联动的数字用蓝色表示，没有联动的数字用黑色表示。
- 表达式区域的原则，需要横向能够放下整个表达式，横向宽度不够时缩小字体，如果有一条表达式太长，整个表达式列表中所有表达式的字体同时缩小。
- 正在输入表达式区域的原则，需要横向能够放下整个表达式，横向宽度不够时缩小字体，需限制最小字体可识别。
- 输入回车时，把当前表达式置入历史列表中，在输入框内只留下当前表达式的计算结果。

## 主菜单

在主菜单中，您可以切换窗口主题、查看帮助手册，了解计算器的更多信息。

### 主题

窗口主题包含浅色主题、深色主题和系统主题，其中系统主题为默认设置。

1. 在计算器界面，点击![icon_menu](icon/icon_menu.svg)。
2. 点击 **主题**，选择一个主题颜色。

### 帮助

查看帮助手册，进一步了解和使用计算器。

1. 在计算器界面，点击 ![icon_menu](icon/icon_menu.svg)。
2. 点击 **帮助**。
3. 查看计算器的帮助手册。


### 关于

1. 在计算器界面，点击 ![icon_menu](icon/icon_menu.svg)。
2. 点击 **关于**。
3. 查看计算器的版本和介绍。


### 退出

1. 在计算器界面，点击 ![icon_menu](icon/icon_menu.svg)。
2. 点击 **退出**。

